<table>
  <caption><%= @metric.name %></caption>
  <thead>
    <tr>
      <th>Date</th>

      <% @scopes.each do |scope| %>
      <th id="scope-<%= scope.id %>" scope="column"><%= scope.name %></th>
      <% end %>
    </tr>
  </thead>

  <tbody>
    <% @datapoints.each do |date, values| %>
    <tr>
      <th id="date-<%= date %>" scope="row"><%= date %></th>
      <% @scopes.each do |scope| %>
      <td headers="date-<%= date %> scope-<%= scope.id %>"><%= values.first[scope.id.to_s] %></td>
      <% end %>
    </tr>
    <% end %>
  </tbody>
</table>

